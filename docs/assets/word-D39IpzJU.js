import{i as x,a as b}from"./components-Cc1Cf0Z1.js";import"./svg-ckjYZtu2.js";import"./builder-BYQ1bFeF.js";async function c(){console.log("Initializing word generator...");const n=document.getElementById("loading");n.innerHTML=`
    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
    <p class="mt-4 text-gray-600 dark:text-gray-300">Loading builder core...</p>
  `;try{if(window.initBuilderCore)await window.initBuilderCore();else throw new Error("Builder core not available");n.innerHTML=`
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
      <p class="mt-4 text-gray-600 dark:text-gray-300">Loading archived forms...</p>
    `,await E(),g(),y("4xl"),S()}catch(e){console.error("Failed to initialize word generator:",e),n.innerHTML=`
      <div class="text-red-500 text-xl mb-4">‚ö†Ô∏è</div>
      <p class="text-gray-600 dark:text-gray-300 mb-4">Failed to initialize word generator</p>
      <p class="text-gray-500 dark:text-gray-400 text-sm">Error: ${e.message}</p>
    `}}let m=[];async function E(){var n;try{let e;try{const t=await fetch("./archive/manifest.json");if(t.ok)e=(await t.json()).files,console.log(`üìã Loaded manifest with ${e.length} files`);else throw new Error("Manifest not found")}catch(t){console.warn("Could not load manifest, falling back to hardcoded list:",t),e=["apek.json","cam.json","cam_v2.json","pyraflare.json","phoenetic/A.json","phoenetic/B.json","phoenetic/C.json"]}const o=[];for(const t of e)try{console.log(`Attempting to load: ./archive/${t}`);const r=await fetch(`./archive/${t}`);if(r.ok){const a=await r.json();a.filename=t,o.push(a),console.log(`‚úÖ Loaded ${t}:`,((n=a.metadata)==null?void 0:n.name)||"Unknown")}else console.warn(`‚ùå Failed to load ${t}: ${r.status} ${r.statusText}`)}catch(r){console.warn(`‚ùå Error loading ${t}:`,r)}if(console.log(`Total compositions loaded: ${o.length}`),o.length===0)throw new Error("No compositions could be loaded");m=o,console.log(`üéâ Successfully loaded ${o.length} archived forms as source material`)}catch(e){throw console.error("Failed to load archived forms:",e),e}}function g(){const n=document.getElementById("loading"),e=document.getElementById("words-grid"),o=document.getElementById("words-container"),t=document.getElementById("wordCount"),r=parseInt((t==null?void 0:t.value)||6);n.classList.add("hidden"),e.classList.remove("hidden"),o.innerHTML="";for(let a=0;a<r;a++){const s=v(a);o.appendChild(s)}console.log(`Generated ${r} random words`)}function v(n){const e=document.createElement("div");e.className="bg-white dark:bg-slate-800 rounded-lg shadow-md border border-gray-200 dark:border-slate-700 p-6";const o=Math.floor(Math.random()*4)+2,t=document.createElement("div");t.className="mb-4 text-center";const r=document.createElement("h3");r.className="text-lg font-semibold text-gray-900 dark:text-gray-100",r.textContent=`Word ${n+1}`;const a=document.createElement("div");a.className="text-sm text-gray-600 dark:text-gray-400 mt-1",a.textContent=`${o} form${o>1?"s":""}`,t.appendChild(r),t.appendChild(a),e.appendChild(t);const s=document.createElement("div");s.className="relative bg-gray-50 dark:bg-slate-900 rounded-lg p-4 flex items-center justify-center overflow-x-auto",s.style.minHeight="350px";const i=document.createElement("div");i.className="flex items-center justify-center word-forms-wrapper",i.style.gap="calc(0.3 * 8px)";for(let l=0;l<o;l++){const d=C();i.appendChild(d)}return s.appendChild(i),e.appendChild(s),e}function C(){var a,s;const n=m[Math.floor(Math.random()*m.length)],e=document.createElement("div");e.className="inline-block",e.style.width="150px",e.style.height="150px",e.style.overflow="hidden";const o=document.createElement("div");o.className="relative word-grids-wrapper",o.style.transform="scale(0.3)",o.style.transformOrigin="top left";const t=document.createElement("div");t.className="grid grid-cols-5 gap-0 z-10",t.style.width="500px",t.style.height="500px";const r=document.createElement("div");return r.className="absolute grid grid-cols-4 gap-0 z-0",r.style.width="400px",r.style.height="400px",r.style.top="50px",r.style.left="50px",p(t,25),p(r,16),o.appendChild(t),o.appendChild(r),e.appendChild(o),(a=n.grids)!=null&&a.serifs&&f(t,n.grids.serifs),(s=n.grids)!=null&&s.joins&&f(r,n.grids.joins),$(e,t),e}function $(n,e){const o=[!1,!1,!1,!1,!1];for(let l=0;l<25;l++){const d=e.children[l],w=l%5;d&&d.children.length>0&&(o[w]=!0)}let t=0;for(let l=0;l<5&&!o[l];l++)t++;let r=0;for(let l=4;l>=0&&!o[l];l--)r++;const a=50,s=t*a,i=r*a;s>0&&(n.style.marginLeft=`-${s}px`),i>0&&(n.style.marginRight=`-${i}px`),n.dataset.leftKern=s,n.dataset.rightKern=i,console.log(`Applied kerning: left=${t} cols (-${s}px), right=${r} cols (-${i}px)`)}function p(n,e){for(let o=0;o<e;o++){const t=document.createElement("div");t.className="w-[100px] h-[100px] relative word-grid-cell",t.dataset.index=o,n.appendChild(t)}}function f(n,e){e.shapes.forEach(o=>{var r,a,s;const t=n.children[o.index];if(t){const i={category:o.category,angleKey:o.angleKey,shape:{shape_name:o.shapeName},imagePath:o.imagePath};if((s=(a=(r=window.rulesData)==null?void 0:r.shapes)==null?void 0:a[o.category])!=null&&s[o.angleKey]){const l=window.rulesData.shapes[o.category][o.angleKey].find(d=>d.shape_name===o.shapeName);l?(i.shape=l,k(t,i)):console.warn("Shape not found in rulesData:",o.shapeName)}else console.warn("Category/angleKey not found in rulesData:",o.category,o.angleKey)}})}function k(n,e){n.innerHTML="";const o="absolute";let t=null;if(window.SVGUtils&&window.SVGUtils.createSVGElement&&(t=window.SVGUtils.createSVGElement(e.category,e.angleKey,e.shape.shape_name,o)),!t){console.warn("Could not create SVG for shape:",e);return}t.setAttribute("alt",e.shape.shape_name),window.applyPositioning?window.applyPositioning(t,e):(t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0"),n.appendChild(t)}function S(){const n=document.getElementById("sticky-subnav");if(!n){console.warn("Sticky subnav not found");return}n.classList.remove("hidden"),L(),B();const e=document.getElementById("generateBtn");e&&e.addEventListener("click",g)}function L(){const n=document.querySelectorAll(".size-tab");n.forEach(e=>{e.addEventListener("click",()=>{const o=e.dataset.size;n.forEach(t=>{t===e?t.className="size-tab px-3 py-2 text-sm font-medium rounded-md transition-colors bg-blue-500 text-white":t.className="size-tab px-3 py-2 text-sm font-medium rounded-md transition-colors text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}),y(o)})})}const h={"7xl":.6,"6xl":.5,"5xl":.4,"4xl":.3,"3xl":.25,"2xl":.2,xl:.167,lg:.15,base:.133,sm:.117,xs:.1};function y(n){const e=h[n]||h["4xl"],o=document.querySelectorAll(".word-grids-wrapper"),t=document.querySelectorAll(".word-forms-wrapper"),r=500*e;o.forEach(s=>{if(s.style.transform=`scale(${e})`,s.parentElement){const i=s.parentElement;i.style.width=`${r}px`,i.style.height=`${r}px`;const l=parseFloat(i.dataset.leftKern||0),d=parseFloat(i.dataset.rightKern||0);l>0&&(i.style.marginLeft=`-${l*e}px`),d>0&&(i.style.marginRight=`-${d*e}px`)}});const a=`calc(${e} * 8px)`;t.forEach(s=>{s.style.gap=a}),console.log(`Size changed to ${n} (scale: ${e}, size: ${r}px, gap: ${a}) for ${o.length} forms`)}function B(){const n=document.getElementById("bordersToggle");if(!n){console.warn("Borders toggle not found");return}u(n.checked),n.addEventListener("change",e=>{u(e.target.checked)})}function u(n){const e=document.querySelectorAll(".word-grid-cell");e.forEach(o=>{n?o.classList.add("border","border-gray-200","dark:border-gray-600","border-opacity-20"):o.classList.remove("border","border-gray-200","dark:border-gray-600","border-opacity-20")}),console.log(`Borders ${n?"enabled":"disabled"} for ${e.length} cells`)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();window.initWordGenerator=c;window.generateWords=g;x();b();
