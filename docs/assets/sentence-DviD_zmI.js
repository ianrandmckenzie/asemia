import"./builder-CDpQHjwi.js";/* empty css              */async function m(){console.log("Initializing sentence generator...");const n=document.getElementById("loading");n.innerHTML=`
    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
    <p class="mt-4 text-gray-600 dark:text-gray-300">Loading builder core...</p>
  `;try{if(window.initBuilderCore)await window.initBuilderCore();else throw new Error("Builder core not available");n.innerHTML=`
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
      <p class="mt-4 text-gray-600 dark:text-gray-300">Loading archived forms...</p>
    `,await x(),u(),$()}catch(t){console.error("Failed to initialize sentence generator:",t),n.innerHTML=`
      <div class="text-red-500 text-xl mb-4">‚ö†Ô∏è</div>
      <p class="text-gray-600 dark:text-gray-300 mb-4">Failed to initialize sentence generator</p>
      <p class="text-gray-500 dark:text-gray-400 text-sm">Error: ${t.message}</p>
    `}}let p=[];async function x(){var t;const n=["apek.json","cam.json","cam_v2.json","pyraflare.json","phoenetic/A.json","phoenetic/B.json","phoenetic/C.json"];try{const e=[];for(const o of n)try{console.log(`Attempting to load: ./archive/${o}`);const r=await fetch(`./archive/${o}`);if(r.ok){const s=await r.json();s.filename=o,e.push(s),console.log(`‚úÖ Loaded ${o}:`,((t=s.metadata)==null?void 0:t.name)||"Unknown")}else console.warn(`‚ùå Failed to load ${o}: ${r.status} ${r.statusText}`)}catch(r){console.warn(`‚ùå Error loading ${o}:`,r)}if(console.log(`Total compositions loaded: ${e.length}`),e.length===0)throw new Error("No compositions could be loaded");p=e,console.log(`üéâ Successfully loaded ${e.length} archived forms as source material`)}catch(e){throw console.error("Failed to load archived forms:",e),e}}function u(){const n=document.getElementById("loading"),t=document.getElementById("sentences-grid"),e=document.getElementById("sentences-container"),o=document.getElementById("sentenceCount"),r=parseInt((o==null?void 0:o.value)||3);n.classList.add("hidden"),t.classList.remove("hidden"),e.innerHTML="";for(let s=0;s<r;s++){const l=E(s);e.appendChild(l)}console.log(`Generated ${r} random sentences`)}function E(n){const t=document.createElement("div");t.className="bg-white dark:bg-slate-800 rounded-lg shadow-md border border-gray-200 dark:border-slate-700 p-6";const e=Math.floor(Math.random()*5)+3,o=document.createElement("div");o.className="mb-4 text-center";const r=document.createElement("h3");r.className="text-lg font-semibold text-gray-900 dark:text-gray-100",r.textContent=`Sentence ${n+1}`;const s=document.createElement("div");s.className="text-sm text-gray-600 dark:text-gray-400 mt-1",s.textContent=`${e} word${e>1?"s":""}`,o.appendChild(r),o.appendChild(s),t.appendChild(o);const l=document.createElement("div");l.className="relative bg-gray-50 dark:bg-slate-900 rounded-lg p-4 flex items-center justify-center",l.style.minHeight="400px";const i=document.createElement("div");i.className="flex flex-wrap items-center justify-center sentence-words-wrapper",i.style.rowGap="calc(0.6 * 24px)";for(let a=0;a<e;a++){const c=b();if(i.appendChild(c),a<e-1){const d=v();i.appendChild(d)}}return l.appendChild(i),t.appendChild(l),t}function b(){const n=document.createElement("div");n.className="inline-flex items-center word-forms-wrapper";const t=Math.floor(Math.random()*4)+2;n.style.gap="calc(0.6 * 8px)";for(let e=0;e<t;e++){const o=C();n.appendChild(o)}return n}function v(){const n=document.createElement("div");n.className="inline-block word-space",n.style.width="300px",n.style.height="300px";const t=document.createElement("div");t.className="relative sentence-grids-wrapper",t.style.transform="scale(0.6)",t.style.transformOrigin="top left";const e=document.createElement("div");return e.className="grid grid-cols-5 gap-0 z-10",e.style.width="500px",e.style.height="500px",g(e,25),t.appendChild(e),n.appendChild(t),n.dataset.isSpace="true",n}function C(){var s,l;const n=p[Math.floor(Math.random()*p.length)],t=document.createElement("div");t.className="inline-block",t.style.width="300px",t.style.height="300px",t.style.overflow="hidden";const e=document.createElement("div");e.className="relative sentence-grids-wrapper",e.style.transform="scale(0.6)",e.style.transformOrigin="top left";const o=document.createElement("div");o.className="grid grid-cols-5 gap-0 z-10",o.style.width="500px",o.style.height="500px";const r=document.createElement("div");return r.className="absolute grid grid-cols-4 gap-0 z-0",r.style.width="400px",r.style.height="400px",r.style.top="50px",r.style.left="50px",g(o,25),g(r,16),e.appendChild(o),e.appendChild(r),t.appendChild(e),(s=n.grids)!=null&&s.serifs&&y(o,n.grids.serifs),(l=n.grids)!=null&&l.joins&&y(r,n.grids.joins),S(t,o),t}function S(n,t){const e=[!1,!1,!1,!1,!1];for(let a=0;a<25;a++){const c=t.children[a],d=a%5;c&&c.children.length>0&&(e[d]=!0)}let o=0;for(let a=0;a<5&&!e[a];a++)o++;let r=0;for(let a=4;a>=0&&!e[a];a--)r++;const s=50,l=o*s,i=r*s;l>0&&(n.style.marginLeft=`-${l}px`),i>0&&(n.style.marginRight=`-${i}px`),n.dataset.leftKern=l,n.dataset.rightKern=i}function g(n,t){for(let e=0;e<t;e++){const o=document.createElement("div");o.className="w-[100px] h-[100px] relative sentence-grid-cell",o.dataset.index=e,n.appendChild(o)}}function y(n,t){t.shapes.forEach(e=>{var r,s,l;const o=n.children[e.index];if(o){const i={category:e.category,angleKey:e.angleKey,shape:{shape_name:e.shapeName},imagePath:e.imagePath};if((l=(s=(r=window.rulesData)==null?void 0:r.shapes)==null?void 0:s[e.category])!=null&&l[e.angleKey]){const a=window.rulesData.shapes[e.category][e.angleKey].find(c=>c.shape_name===e.shapeName);a?(i.shape=a,k(o,i)):console.warn("Shape not found in rulesData:",e.shapeName)}else console.warn("Category/angleKey not found in rulesData:",e.category,e.angleKey)}})}function k(n,t){n.innerHTML="";const e="absolute";let o=null;if(window.SVGUtils&&window.SVGUtils.createSVGElement&&(o=window.SVGUtils.createSVGElement(t.category,t.angleKey,t.shape.shape_name,e)),!o){console.warn("Could not create SVG for shape:",t);return}o.setAttribute("alt",t.shape.shape_name),window.applyPositioning?window.applyPositioning(o,t):(o.style.width="100%",o.style.height="100%",o.style.top="0",o.style.left="0"),n.appendChild(o)}function $(){const n=document.getElementById("sticky-subnav");if(!n){console.warn("Sticky subnav not found");return}n.classList.remove("hidden"),L(),G();const t=document.getElementById("generateBtn");t&&t.addEventListener("click",u)}function L(){const n=document.querySelectorAll(".size-tab");n.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.size;n.forEach(o=>{o===t?o.className="size-tab px-3 py-2 text-sm font-medium rounded-md transition-colors bg-blue-500 text-white":o.className="size-tab px-3 py-2 text-sm font-medium rounded-md transition-colors text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}),N(e)})})}const f={"7xl":.6,"6xl":.5,"5xl":.4,"4xl":.3,"3xl":.25,"2xl":.2,xl:.167,lg:.15,base:.133,sm:.117,xs:.1};function N(n){const t=f[n]||f["7xl"],e=document.querySelectorAll(".sentence-grids-wrapper"),o=document.querySelectorAll(".word-forms-wrapper"),r=document.querySelectorAll(".sentence-words-wrapper"),s=500*t;e.forEach(a=>{if(a.style.transform=`scale(${t})`,a.parentElement){const c=a.parentElement;if(c.style.width=`${s}px`,c.style.height=`${s}px`,!c.dataset.isSpace){const d=parseFloat(c.dataset.leftKern||0),h=parseFloat(c.dataset.rightKern||0);d>0&&(c.style.marginLeft=`-${d*t}px`),h>0&&(c.style.marginRight=`-${h*t}px`)}}});const l=`calc(${t} * 8px)`;o.forEach(a=>{a.style.gap=l});const i=`calc(${t} * 24px)`;r.forEach(a=>{a.style.rowGap=i}),console.log(`Size changed to ${n} (scale: ${t}, size: ${s}px) for ${e.length} forms`)}function G(){const n=document.getElementById("bordersToggle");if(!n){console.warn("Borders toggle not found");return}w(n.checked),n.addEventListener("change",t=>{w(t.target.checked)})}function w(n){const t=document.querySelectorAll(".sentence-grid-cell");t.forEach(e=>{n?e.classList.add("border","border-gray-200","dark:border-gray-600","border-opacity-20"):e.classList.remove("border","border-gray-200","dark:border-gray-600","border-opacity-20")}),console.log(`Borders ${n?"enabled":"disabled"} for ${t.length} cells`)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m();window.initSentenceGenerator=m;window.generateSentences=u;
