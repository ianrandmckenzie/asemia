import"./builder-CDpQHjwi.js";/* empty css              */async function c(){console.log("Initializing word generator...");const n=document.getElementById("loading");n.innerHTML=`
    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
    <p class="mt-4 text-gray-600 dark:text-gray-300">Loading builder core...</p>
  `;try{if(window.initBuilderCore)await window.initBuilderCore();else throw new Error("Builder core not available");n.innerHTML=`
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
      <p class="mt-4 text-gray-600 dark:text-gray-300">Loading archived forms...</p>
    `,await w(),g(),C()}catch(t){console.error("Failed to initialize word generator:",t),n.innerHTML=`
      <div class="text-red-500 text-xl mb-4">‚ö†Ô∏è</div>
      <p class="text-gray-600 dark:text-gray-300 mb-4">Failed to initialize word generator</p>
      <p class="text-gray-500 dark:text-gray-400 text-sm">Error: ${t.message}</p>
    `}}let m=[];async function w(){var t;const n=["apek.json","cam.json","cam_v2.json","pyraflare.json","phoenetic/A.json","phoenetic/B.json","phoenetic/C.json"];try{const e=[];for(const o of n)try{console.log(`Attempting to load: ./archive/${o}`);const r=await fetch(`./archive/${o}`);if(r.ok){const a=await r.json();a.filename=o,e.push(a),console.log(`‚úÖ Loaded ${o}:`,((t=a.metadata)==null?void 0:t.name)||"Unknown")}else console.warn(`‚ùå Failed to load ${o}: ${r.status} ${r.statusText}`)}catch(r){console.warn(`‚ùå Error loading ${o}:`,r)}if(console.log(`Total compositions loaded: ${e.length}`),e.length===0)throw new Error("No compositions could be loaded");m=e,console.log(`üéâ Successfully loaded ${e.length} archived forms as source material`)}catch(e){throw console.error("Failed to load archived forms:",e),e}}function g(){const n=document.getElementById("loading"),t=document.getElementById("words-grid"),e=document.getElementById("words-container"),o=document.getElementById("wordCount"),r=parseInt((o==null?void 0:o.value)||6);n.classList.add("hidden"),t.classList.remove("hidden"),e.innerHTML="";for(let a=0;a<r;a++){const l=x(a);e.appendChild(l)}console.log(`Generated ${r} random words`)}function x(n){const t=document.createElement("div");t.className="bg-white dark:bg-slate-800 rounded-lg shadow-md border border-gray-200 dark:border-slate-700 p-6";const e=Math.floor(Math.random()*4)+2,o=document.createElement("div");o.className="mb-4 text-center";const r=document.createElement("h3");r.className="text-lg font-semibold text-gray-900 dark:text-gray-100",r.textContent=`Word ${n+1}`;const a=document.createElement("div");a.className="text-sm text-gray-600 dark:text-gray-400 mt-1",a.textContent=`${e} form${e>1?"s":""}`,o.appendChild(r),o.appendChild(a),t.appendChild(o);const l=document.createElement("div");l.className="relative bg-gray-50 dark:bg-slate-900 rounded-lg p-4 flex items-center justify-center overflow-x-auto",l.style.minHeight="350px";const i=document.createElement("div");i.className="flex items-center justify-center word-forms-wrapper",i.style.gap="calc(0.6 * 8px)";for(let s=0;s<e;s++){const d=b();i.appendChild(d)}return l.appendChild(i),t.appendChild(l),t}function b(){var a,l;const n=m[Math.floor(Math.random()*m.length)],t=document.createElement("div");t.className="inline-block",t.style.width="300px",t.style.height="300px",t.style.overflow="hidden";const e=document.createElement("div");e.className="relative word-grids-wrapper",e.style.transform="scale(0.6)",e.style.transformOrigin="top left";const o=document.createElement("div");o.className="grid grid-cols-5 gap-0 z-10",o.style.width="500px",o.style.height="500px";const r=document.createElement("div");return r.className="absolute grid grid-cols-4 gap-0 z-0",r.style.width="400px",r.style.height="400px",r.style.top="50px",r.style.left="50px",p(o,25),p(r,16),e.appendChild(o),e.appendChild(r),t.appendChild(e),(a=n.grids)!=null&&a.serifs&&u(o,n.grids.serifs),(l=n.grids)!=null&&l.joins&&u(r,n.grids.joins),E(t,o),t}function E(n,t){const e=[!1,!1,!1,!1,!1];for(let s=0;s<25;s++){const d=t.children[s],h=s%5;d&&d.children.length>0&&(e[h]=!0)}let o=0;for(let s=0;s<5&&!e[s];s++)o++;let r=0;for(let s=4;s>=0&&!e[s];s--)r++;const a=50,l=o*a,i=r*a;l>0&&(n.style.marginLeft=`-${l}px`),i>0&&(n.style.marginRight=`-${i}px`),n.dataset.leftKern=l,n.dataset.rightKern=i,console.log(`Applied kerning: left=${o} cols (-${l}px), right=${r} cols (-${i}px)`)}function p(n,t){for(let e=0;e<t;e++){const o=document.createElement("div");o.className="w-[100px] h-[100px] relative word-grid-cell",o.dataset.index=e,n.appendChild(o)}}function u(n,t){t.shapes.forEach(e=>{var r,a,l;const o=n.children[e.index];if(o){const i={category:e.category,angleKey:e.angleKey,shape:{shape_name:e.shapeName},imagePath:e.imagePath};if((l=(a=(r=window.rulesData)==null?void 0:r.shapes)==null?void 0:a[e.category])!=null&&l[e.angleKey]){const s=window.rulesData.shapes[e.category][e.angleKey].find(d=>d.shape_name===e.shapeName);s?(i.shape=s,v(o,i)):console.warn("Shape not found in rulesData:",e.shapeName)}else console.warn("Category/angleKey not found in rulesData:",e.category,e.angleKey)}})}function v(n,t){n.innerHTML="";const e="absolute";let o=null;if(window.SVGUtils&&window.SVGUtils.createSVGElement&&(o=window.SVGUtils.createSVGElement(t.category,t.angleKey,t.shape.shape_name,e)),!o){console.warn("Could not create SVG for shape:",t);return}o.setAttribute("alt",t.shape.shape_name),window.applyPositioning?window.applyPositioning(o,t):(o.style.width="100%",o.style.height="100%",o.style.top="0",o.style.left="0"),n.appendChild(o)}function C(){const n=document.getElementById("sticky-subnav");if(!n){console.warn("Sticky subnav not found");return}n.classList.remove("hidden"),$(),S();const t=document.getElementById("generateBtn");t&&t.addEventListener("click",g)}function $(){const n=document.querySelectorAll(".size-tab");n.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.size;n.forEach(o=>{o===t?o.className="size-tab px-3 py-2 text-sm font-medium rounded-md transition-colors bg-blue-500 text-white":o.className="size-tab px-3 py-2 text-sm font-medium rounded-md transition-colors text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}),k(e)})})}const y={"7xl":.6,"6xl":.5,"5xl":.4,"4xl":.3,"3xl":.25,"2xl":.2,xl:.167,lg:.15,base:.133,sm:.117,xs:.1};function k(n){const t=y[n]||y["7xl"],e=document.querySelectorAll(".word-grids-wrapper"),o=document.querySelectorAll(".word-forms-wrapper"),r=500*t;e.forEach(l=>{if(l.style.transform=`scale(${t})`,l.parentElement){const i=l.parentElement;i.style.width=`${r}px`,i.style.height=`${r}px`;const s=parseFloat(i.dataset.leftKern||0),d=parseFloat(i.dataset.rightKern||0);s>0&&(i.style.marginLeft=`-${s*t}px`),d>0&&(i.style.marginRight=`-${d*t}px`)}});const a=`calc(${t} * 8px)`;o.forEach(l=>{l.style.gap=a}),console.log(`Size changed to ${n} (scale: ${t}, size: ${r}px, gap: ${a}) for ${e.length} forms`)}function S(){const n=document.getElementById("bordersToggle");if(!n){console.warn("Borders toggle not found");return}f(n.checked),n.addEventListener("change",t=>{f(t.target.checked)})}function f(n){const t=document.querySelectorAll(".word-grid-cell");t.forEach(e=>{n?e.classList.add("border","border-gray-200","dark:border-gray-600","border-opacity-20"):e.classList.remove("border","border-gray-200","dark:border-gray-600","border-opacity-20")}),console.log(`Borders ${n?"enabled":"disabled"} for ${t.length} cells`)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();window.initWordGenerator=c;window.generateWords=g;
