(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}})();let l=null,u=!1;async function p(){if(l)return l;try{return l=await(await fetch("/assets/rules.json")).json(),l}catch(t){return console.error("Failed to load rules.json:",t),null}}function c(t,r,i){var n,o;if(!((o=(n=l==null?void 0:l.shapes)==null?void 0:n[t])!=null&&o[r]))return console.warn(`SVG not found: ${t}/${r}/${i}`),null;const s=l.shapes[t][r],e=s.find(a=>a.shape_name===i);return e?e.svg:(console.warn(`Shape not found: ${i} in ${t}/${r}`),console.log("Available shapes:",s.map(a=>a.shape_name)),null)}function f(t){const r=t.match(/\/assets\/shapes\/([^/]+)\/([^/]+)\/([^.]+)\.svg/);if(!r)return console.warn("Invalid SVG path format:",t),null;const[,i,s,e]=r;return c(i,s,e)}function v(t,r,i,s,e=""){const n=c(r,i,s);if(!n)return!1;const o=document.createElement("div");o.innerHTML=n;const a=o.querySelector("svg");return a?(e&&a.setAttribute("class",e),t.innerHTML="",t.appendChild(a),!0):(console.error("Invalid SVG string:",n.substring(0,100)+"..."),!1)}function g(t,r,i=""){const s=f(r);if(!s)return!1;const e=document.createElement("div");e.innerHTML=s;const n=e.querySelector("svg");return n?(i&&n.setAttribute("class",i),t.innerHTML="",t.appendChild(n),!0):(console.error("Invalid SVG string:",s.substring(0,100)+"..."),!1)}function S(t,r,i,s=""){const e=c(t,r,i);if(!e)return null;const n=document.createElement("div");n.innerHTML=e;const o=n.querySelector("svg");return o?(s&&o.setAttribute("class",s),o.setAttribute("data-category",t),o.setAttribute("data-angle-key",r),o.setAttribute("data-shape-name",i),o):(console.error("Invalid SVG string:",e.substring(0,100)+"..."),null)}function m(t,r=""){const i=f(t);if(!i)return null;const s=document.createElement("div");s.innerHTML=i;const e=s.querySelector("svg");return e?(r&&e.setAttribute("class",r),e):(console.error("Invalid SVG string:",i.substring(0,100)+"..."),null)}async function d(){if(!u)try{await p(),u=!0,console.log("SVG system initialized with rules data"),document.querySelectorAll("img[data-svg-replace]").forEach(t=>{const r=t.getAttribute("data-svg-replace")||t.src,i=t.className,s=t.alt,e=m(r,i);e&&s&&e.setAttribute("aria-label",s),e&&t.parentNode.replaceChild(e,t)}),window.dispatchEvent(new CustomEvent("svgSystemReady"))}catch(t){console.error("Failed to initialize SVG system:",t)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();function h(){return u&&l!==null}window.SVGUtils={loadRulesData:p,getSVGByPath:c,getSVGByFilePath:f,insertSVG:v,insertSVGByFilePath:g,createSVGElement:S,createSVGElementByFilePath:m,initSVGSystem:d,isReady:h};console.log("SVGUtils loaded and available on window.SVGUtils");
