import{i as b,a as E}from"./components-as-40zzb.js";import"./svg-ckjYZtu2.js";import"./builder-DJxBjII2.js";async function m(){console.log("Initializing sentence generator...");const o=document.getElementById("loading");o.innerHTML=`
    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
    <p class="mt-4 text-gray-600 dark:text-gray-300">Loading builder core...</p>
  `;try{if(window.initBuilderCore)await window.initBuilderCore();else throw new Error("Builder core not available");o.innerHTML=`
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
      <p class="mt-4 text-gray-600 dark:text-gray-300">Loading archived forms...</p>
    `,await v(),f(),x("base"),G()}catch(e){console.error("Failed to initialize sentence generator:",e),o.innerHTML=`
      <div class="text-red-500 text-xl mb-4">‚ö†Ô∏è</div>
      <p class="text-gray-600 dark:text-gray-300 mb-4">Failed to initialize sentence generator</p>
      <p class="text-gray-500 dark:text-gray-400 text-sm">Error: ${e.message}</p>
    `}}let p=[];async function v(){var o;try{let e;try{const n=await fetch("./archive/manifest.json");if(n.ok)e=(await n.json()).files,console.log(`üìã Loaded manifest with ${e.length} files`);else throw new Error("Manifest not found")}catch(n){console.warn("Could not load manifest, falling back to hardcoded list:",n),e=["apek.json","cam.json","cam_v2.json","pyraflare.json","phoenetic/A.json","phoenetic/B.json","phoenetic/C.json"]}const t=[];for(const n of e)try{console.log(`Attempting to load: ./archive/${n}`);const a=await fetch(`./archive/${n}`);if(a.ok){const s=await a.json();s.filename=n,t.push(s),console.log(`‚úÖ Loaded ${n}:`,((o=s.metadata)==null?void 0:o.name)||"Unknown")}else console.warn(`‚ùå Failed to load ${n}: ${a.status} ${a.statusText}`)}catch(a){console.warn(`‚ùå Error loading ${n}:`,a)}if(console.log(`Total compositions loaded: ${t.length}`),t.length===0)throw new Error("No compositions could be loaded");p=t,console.log(`üéâ Successfully loaded ${t.length} archived forms as source material`)}catch(e){throw console.error("Failed to load archived forms:",e),e}}function f(){const o=document.getElementById("loading"),e=document.getElementById("sentences-grid"),t=document.getElementById("sentences-container"),n=document.getElementById("sentenceCount"),a=parseInt((n==null?void 0:n.value)||3);o.classList.add("hidden"),e.classList.remove("hidden"),t.innerHTML="";for(let s=0;s<a;s++){const l=C(s);t.appendChild(l)}console.log(`Generated ${a} random sentences`)}function C(o){const e=document.createElement("div");e.className="bg-white dark:bg-slate-800 rounded-lg shadow-md border border-gray-200 dark:border-slate-700 p-6";const t=Math.floor(Math.random()*5)+3,n=document.createElement("div");n.className="mb-4 text-center";const a=document.createElement("h3");a.className="text-lg font-semibold text-gray-900 dark:text-gray-100",a.textContent=`Sentence ${o+1}`;const s=document.createElement("div");s.className="text-sm text-gray-600 dark:text-gray-400 mt-1",s.textContent=`${t} word${t>1?"s":""}`,n.appendChild(a),n.appendChild(s),e.appendChild(n);const l=document.createElement("div");l.className="relative bg-gray-50 dark:bg-slate-900 rounded-lg p-4 flex items-center justify-center",l.style.minHeight="400px";const i=document.createElement("div");i.className="flex flex-wrap items-center justify-center sentence-words-wrapper",i.style.rowGap="calc(0.133 * 24px)";for(let r=0;r<t;r++){const c=S();if(i.appendChild(c),r<t-1){const d=k();i.appendChild(d)}}return l.appendChild(i),e.appendChild(l),e}function S(){const o=document.createElement("div");o.className="inline-flex items-center word-forms-wrapper";const e=Math.floor(Math.random()*4)+2;o.style.gap="calc(0.133 * 8px)";for(let t=0;t<e;t++){const n=$();o.appendChild(n)}return o}function k(){const o=document.createElement("div");o.className="inline-block word-space",o.style.width="66.5px",o.style.height="66.5px";const e=document.createElement("div");e.className="relative sentence-grids-wrapper",e.style.transform="scale(0.133)",e.style.transformOrigin="top left";const t=document.createElement("div");return t.className="grid grid-cols-5 gap-0 z-10",t.style.width="500px",t.style.height="500px",g(t,25),e.appendChild(t),o.appendChild(e),o.dataset.isSpace="true",o}function $(){var s,l;const o=p[Math.floor(Math.random()*p.length)],e=document.createElement("div");e.className="inline-block",e.style.width="66.5px",e.style.height="66.5px",e.style.overflow="hidden";const t=document.createElement("div");t.className="relative sentence-grids-wrapper",t.style.transform="scale(0.133)",t.style.transformOrigin="top left";const n=document.createElement("div");n.className="grid grid-cols-5 gap-0 z-10",n.style.width="500px",n.style.height="500px";const a=document.createElement("div");return a.className="absolute grid grid-cols-4 gap-0 z-0",a.style.width="400px",a.style.height="400px",a.style.top="50px",a.style.left="50px",g(n,25),g(a,16),t.appendChild(n),t.appendChild(a),e.appendChild(t),(s=o.grids)!=null&&s.serifs&&u(n,o.grids.serifs),(l=o.grids)!=null&&l.joins&&u(a,o.grids.joins),L(e,n),e}function L(o,e){const t=[!1,!1,!1,!1,!1];for(let r=0;r<25;r++){const c=e.children[r],d=r%5;c&&c.children.length>0&&(t[d]=!0)}let n=0;for(let r=0;r<5&&!t[r];r++)n++;let a=0;for(let r=4;r>=0&&!t[r];r--)a++;const s=50,l=n*s,i=a*s;l>0&&(o.style.marginLeft=`-${l}px`),i>0&&(o.style.marginRight=`-${i}px`),o.dataset.leftKern=l,o.dataset.rightKern=i}function g(o,e){for(let t=0;t<e;t++){const n=document.createElement("div");n.className="w-[100px] h-[100px] relative sentence-grid-cell",n.dataset.index=t,o.appendChild(n)}}function u(o,e){e.shapes.forEach(t=>{var a,s,l;const n=o.children[t.index];if(n){const i={category:t.category,angleKey:t.angleKey,shape:{shape_name:t.shapeName},imagePath:t.imagePath};if((l=(s=(a=window.rulesData)==null?void 0:a.shapes)==null?void 0:s[t.category])!=null&&l[t.angleKey]){const r=window.rulesData.shapes[t.category][t.angleKey].find(c=>c.shape_name===t.shapeName);r?(i.shape=r,N(n,i)):console.warn("Shape not found in rulesData:",t.shapeName)}else console.warn("Category/angleKey not found in rulesData:",t.category,t.angleKey)}})}function N(o,e){o.innerHTML="";const t="absolute";let n=null;if(window.SVGUtils&&window.SVGUtils.createSVGElement&&(n=window.SVGUtils.createSVGElement(e.category,e.angleKey,e.shape.shape_name,t)),!n){console.warn("Could not create SVG for shape:",e);return}n.setAttribute("alt",e.shape.shape_name),window.applyPositioning?window.applyPositioning(n,e):(n.style.width="100%",n.style.height="100%",n.style.top="0",n.style.left="0"),o.appendChild(n)}function G(){const o=document.getElementById("sticky-subnav");if(!o){console.warn("Sticky subnav not found");return}o.classList.remove("hidden"),B(),z();const e=document.getElementById("generateBtn");e&&e.addEventListener("click",f)}function B(){const o=document.querySelectorAll(".size-tab");o.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.size;o.forEach(n=>{n===e?n.className="size-tab px-3 py-2 text-sm font-medium rounded-md transition-colors bg-blue-500 text-white":n.className="size-tab px-3 py-2 text-sm font-medium rounded-md transition-colors text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"}),x(t)})})}const y={"7xl":.6,"6xl":.5,"5xl":.4,"4xl":.3,"3xl":.25,"2xl":.2,xl:.167,lg:.15,base:.133,sm:.117,xs:.1};function x(o){const e=y[o]||y.base,t=document.querySelectorAll(".sentence-grids-wrapper"),n=document.querySelectorAll(".word-forms-wrapper"),a=document.querySelectorAll(".sentence-words-wrapper"),s=500*e;t.forEach(r=>{if(r.style.transform=`scale(${e})`,r.parentElement){const c=r.parentElement;if(c.style.width=`${s}px`,c.style.height=`${s}px`,!c.dataset.isSpace){const d=parseFloat(c.dataset.leftKern||0),h=parseFloat(c.dataset.rightKern||0);d>0&&(c.style.marginLeft=`-${d*e}px`),h>0&&(c.style.marginRight=`-${h*e}px`)}}});const l=`calc(${e} * 8px)`;n.forEach(r=>{r.style.gap=l});const i=`calc(${e} * 24px)`;a.forEach(r=>{r.style.rowGap=i}),console.log(`Size changed to ${o} (scale: ${e}, size: ${s}px) for ${t.length} forms`)}function z(){const o=document.getElementById("bordersToggle");if(!o){console.warn("Borders toggle not found");return}w(o.checked),o.addEventListener("change",e=>{w(e.target.checked)})}function w(o){const e=document.querySelectorAll(".sentence-grid-cell");e.forEach(t=>{o?t.classList.add("border","border-gray-200","dark:border-gray-600","border-opacity-20"):t.classList.remove("border","border-gray-200","dark:border-gray-600","border-opacity-20")}),console.log(`Borders ${o?"enabled":"disabled"} for ${e.length} cells`)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m();window.initSentenceGenerator=m;window.generateSentences=f;b();E();
